{
  "project": "Sponge — frontend core (zidan/editor branch)",
  "branch": "zidan/editor",
  "instructions": [
    "Read AGENTS.md and FRONTEND_AGENTS.md first. Then read progress.txt for learnings.",
    "Pick the first story with status 'pending'. Implement it.",
    "STRICT FILE SCOPE: You may ONLY modify the files listed in a story's 'files' array. Do not touch any other files. If you think you need to touch an unlisted file, stop and document it as a blocker in progress.txt instead.",
    "CSS rule: when adding to index.css, ONLY append new rules at the very end of the file. Never modify or reorder existing rules. This prevents merge conflicts with Josh's branch.",
    "Validate with: cd frontend && npm run build — must produce 0 errors.",
    "After passing: (1) mark status 'complete' in prd.json, (2) append to progress.txt, (3) commit only the files in the story's 'files' array plus prd.json and progress.txt.",
    "Move to next pending story. Stop when all complete or on unresolvable blocker."
  ],
  "stories": [
    {
      "id": "S-01",
      "title": "Auto-submit when timer expires",
      "status": "complete",
      "branch": "zidan/editor",
      "files": ["frontend/src/hooks/useSession.jsx"],
      "description": "When the countdown timer reaches 0, automatically call submit() so the session ends and the user sees their results. Currently the timer stops at 0 but nothing happens.",
      "acceptance": [
        "When timeLeft hits 0, submit() is called automatically",
        "Guard: do not call submit() if isSubmitting is already true",
        "The existing manual Submit button still works unchanged",
        "npm run build passes with 0 errors"
      ]
    },
    {
      "id": "S-02",
      "title": "Username capture on landing screen",
      "status": "pending",
      "branch": "zidan/editor",
      "ownership_note": "LandingScreen.jsx is physically in components/game/ but is owned by Zidan for session flow. Josh does not touch LandingScreen.",
      "files": [
        "frontend/src/components/game/LandingScreen.jsx",
        "frontend/src/hooks/useSession.jsx",
        "frontend/src/api/client.js",
        "frontend/src/index.css"
      ],
      "description": "Add a name input field to the LandingScreen before the Start button. The username is optional — if left blank, default to 'Anonymous'. Store it in session state and pass it to submitSession.",
      "acceptance": [
        "LandingScreen has a text input labeled 'Your name' above the Start button",
        "Input is optional — blank defaults to 'Anonymous'",
        "username is stored in useSession state (add to SessionProvider and context value)",
        "beginSession accepts the username value from the input and stores it",
        "submit() passes username in the submitSession call: { session_id, final_code, username }",
        "api/client.js mock submitSession accepts and ignores the extra username field (no signature change needed — just pass it through)",
        "CSS for the new input appended at the END of index.css only, using existing CSS vars",
        "npm run build passes with 0 errors"
      ]
    },
    {
      "id": "S-03",
      "title": "Debounce file_edit event logging",
      "status": "pending",
      "branch": "zidan/editor",
      "files": ["frontend/src/hooks/useSession.jsx"],
      "description": "updateFileContent currently calls logEvent('file_edit') on every keystroke, which would flood the backend. Debounce it so file_edit only logs after the user stops typing for 1500ms.",
      "acceptance": [
        "logEvent for file_edit fires at most once per 1500ms of inactivity",
        "The debounce resets on each new keystroke",
        "fileBuffers still update immediately on every keystroke — only the logEvent is debounced",
        "Implemented with useRef + setTimeout/clearTimeout — no extra libraries",
        "npm run build passes with 0 errors"
      ]
    },
    {
      "id": "S-04",
      "title": "Fix missing ProblemStatement CSS classes",
      "status": "pending",
      "branch": "zidan/editor",
      "files": [
        "frontend/src/components/editor/ProblemStatement.jsx",
        "frontend/src/index.css"
      ],
      "description": "Read ProblemStatement.jsx and check every className it uses against index.css. Add any missing rules so it renders correctly. Append-only to index.css — never modify existing rules.",
      "acceptance": [
        "Every className in ProblemStatement.jsx has a rule in index.css",
        ".problem-context styled like .problem-requirements (same h4 and body text style)",
        "New CSS appended at the END of index.css only",
        "npm run build passes with 0 errors"
      ]
    },
    {
      "id": "S-05",
      "title": "Username initial in chat avatar",
      "status": "pending",
      "branch": "zidan/editor",
      "depends_on": "S-02",
      "files": ["frontend/src/components/chat/ChatTerminal.jsx"],
      "description": "The user chat avatar hardcodes 'Y'. Replace with the first letter of username from session state. S-02 must be complete first (username exists in context).",
      "acceptance": [
        "User avatar shows first character of username uppercased (e.g. 'Z' for 'zidan')",
        "Falls back to 'Y' if username is falsy",
        "npm run build passes with 0 errors"
      ]
    }
  ]
}
